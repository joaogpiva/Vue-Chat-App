"use strict";(self["webpackChunkvue_chat_app"]=self["webpackChunkvue_chat_app"]||[]).push([[464],{464:function(e,t,s){s.r(t),s.d(t,{default:function(){return A}});var a=s(3396);const n={class:"d-flex flex-column min-vh-100 justify-content-center align-items-center"},r={class:"card d-flex flex-row",style:{width:"85vw",height:"80vh"}},i={style:{"border-right":"1px solid gray",width:"20%",height:"100%"}},l={style:{width:"80%",height:"100%"}};function o(e,t,s,o,c,d){const u=(0,a.up)("ProfileSidebar"),m=(0,a.up)("ChatWindow");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",r,[(0,a._)("div",i,[(0,a.Wm)(u,{email:this.user.email,name:this.user.displayName},null,8,["email","name"])]),(0,a._)("div",l,[(0,a.Wm)(m)])])])}var c=s(7627),d=s(7139);const u={class:"d-flex flex-column",style:{padding:"1rem"}},m=(0,a._)("div",{class:"p-2"},[(0,a._)("i",{class:"fas fa-user fa-4x",style:{}})],-1),g={class:"p-2"},h={class:"p-2"};function f(e,t,s,n,r,i){return(0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",null,[m,(0,a._)("div",g,(0,d.zw)(e.name),1)]),(0,a._)("div",null,[(0,a._)("div",h,[(0,a._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=t=>e.logout())},"Log out")])])])}var p=(0,a.aZ)({name:"ProfileSidebar",props:{email:String,name:String},methods:{logout(){c.Z.dispatch("logout")}}}),v=s(89);const _=(0,v.Z)(p,[["render",f]]);var w=_,x=s(9242);const y={class:"d-flex flex-column align-items-center justify-content-center",style:{height:"100%"}},S={class:"flex-grow-1 overflow-auto",style:{width:"100%"}},b={class:"d-flex flex-row",style:{height:"10%",width:"100%"}},M={class:"p-2 flex-grow-1"},C=(0,a._)("button",{class:"btn btn-primary"},"Send",-1),Z=[C];function D(e,t,s,n,r,i){const l=(0,a.up)("ChatMessage");return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.messages,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t},[(0,a.Wm)(l,{"text-content":e.content,"author-name":e.authorName,timestamp:e.timestamp},null,8,["text-content","author-name","timestamp"])])))),128))]),(0,a._)("div",b,[(0,a._)("div",M,[(0,a.wy)((0,a._)("input",{class:"form-control",placeholder:"Type here...","onUpdate:modelValue":t[0]||(t[0]=t=>e.currentMessage=t)},null,512),[[x.nr,e.currentMessage]])]),(0,a._)("div",{class:"p-2",onClick:t[1]||(t[1]=t=>e.sendMessage())},Z)])])}const k={class:"d-flex flex-column p-2",style:{width:"100%"}},j={class:"d-flex flex-row justify-content-between align-items-end",style:{height:"20%"}},N={class:"d-flex flex-direction-row align-items-center justify-content-center align-self-start"},W=(0,a._)("div",null,[(0,a._)("i",{class:"fa-solid fa-circle-user fa-2x"})],-1),H={class:"align-self-end"},U={class:"align-self-start"};function z(e,t,s,n,r,i){return(0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("div",j,[(0,a._)("div",N,[W,(0,a._)("div",null,[(0,a._)("p",null,(0,d.zw)(e.authorName),1)])]),(0,a._)("div",H,[(0,a._)("p",null,(0,d.zw)(e.formatDateTime(e.timestamp)),1)])]),(0,a._)("div",U,[(0,a._)("p",null,(0,d.zw)(e.textContent),1)])])}var F=(0,a.aZ)({name:"ChatMessage",props:{textContent:String,authorName:String,timestamp:String},methods:{formatDateTime(e){let t=e?.split("_");return t?t[3]+":"+t[4]+":"+t[5]+" "+t[2]+"/"+t[1]+"/"+t[0]:""}}});const P=(0,v.Z)(F,[["render",z]]);var T=P,V=s(4889),Y=s(7130),I=(0,a.aZ)({name:"ChatWindow",components:{ChatMessage:T},data(){const e={messages:[],currentMessage:"",currentUser:c.Z.state.user};return e},created(){(0,Y.jM)((0,Y.iH)(V.F,"/messages"),(e=>{const t=e.val();this.messages=Object.values(t)}))},methods:{sendMessage(){const e=new Date,t=e.getFullYear()+"_"+(e.getMonth()+1).toString().padStart(2,"0")+"_"+e.getDate()+"_"+e.getHours().toString().padStart(2,"0")+"_"+e.getMinutes().toString().padStart(2,"0")+"_"+e.getSeconds().toString().padStart(2,"0"),s={authorId:this.currentUser["uid"],authorName:this.currentUser["displayName"],timestamp:t,content:this.currentMessage};(0,Y.t8)((0,Y.iH)(V.F,"messages/"+t),s),this.currentMessage=""}}});const K=(0,v.Z)(I,[["render",D]]);var L=K,O=(0,a.aZ)({name:"HomeView",components:{ProfileSidebar:w,ChatWindow:L},data(){const e={user:""};return e},methods:{},mounted(){this.user=c.Z.state.user,this.user||c.Z.dispatch("fetchUser")}});const q=(0,v.Z)(O,[["render",o]]);var A=q}}]);
//# sourceMappingURL=464.bacfef76.js.map